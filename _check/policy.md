**[규칙] 이 문서는 프로젝트의 모든 비즈니스 정책을 정의한다. `Master_How_Spec.md` 및 `Feature_\*.md`의 규칙과 함께 AI 코드 생성의 최종 판단 근거로 사용된다.**

------



### [POL-A] 회원 및 인증 정책 (AuthN/AuthZ)





#### [POL-A-001] 인증 방식



- **결정:** 오직 **JWT(AccessToken, RefreshToken)** 방식만 사용한다.
- **근거:** (1단계 결정) 레거시 PHP 쿠키/세션 방식은 폐기하고, Stateless API 아키텍처를 따른다.



#### [POL-A-002] 자동 로그인 기기 제한



- **결정:** 최대 **5대**의 기기(RefreshToken 기준)까지 동시 자동 로그인을 허용한다.
- **근거:** (1단계 결정) 레거시 시스템에는 정책이 부재했으나, 2025년 표준 보안을 위해 신규 수립한다. (AI는 `user_refresh_tokens` 같은 별도 테이블을 구현하여 RefreshToken과 기기 정보를 관리해야 함 - `schema.sql`에 추가 필요 시 반영)



#### [POL-A-003] SNS 계정 전환



- **결정:** SNS로 가입한 사용자도 '내 정보' 메뉴에서 **비밀번호를 설정**하여, 이메일/비밀번호 로그인을 함께 사용할 수 있도록 허용한다.
- **근거:** (1단계 결정) 사용자 편의성 증대.



#### [POL-A-004] 휴면 계정 정책



- **결정:** 1년 이상 미로그인 시 `users` 테이블의 `status`를 **'DORMANT'**로 변경한다.
- **근거:** (2단계 DDL 반영) 레거시 `happy_member_quies` 별도 테이블 백업 방식은 복잡하므로, `status` 필드 관리로 단순화한다.

------



### [POL-B] 구인·구직 도메인 정책 (Job Domain)





#### [POL-B-001] 지원 단계 커스터마이징



- **결정:** 지원 단계는 기업 회원이 **완벽하게 커스터마이징(생성/수정/삭제/순서 변경)**할 수 있어야 한다.
- **근거:** (1단계 결정) 레거시 고정 플래그(`read_ok` 등) 방식은 2025년 시장 경쟁력이 없다. (2단계 DDL의 `job_application_stages` 테이블 사용)



#### [POL-B-002] 메인 배너/추천 슬롯 노출



- **결정:** `job_options` 테이블의 `is_main_banner`, `is_hot_job` 등의 플래그가 `TRUE`이고 `options_expires_at`이 유효 기간 내일 경우에만 노출한다.
- **근거:** (1단계, 2단계 DDL 반영) 레거시 `guin_banner*` 컬럼 방식을 정규화하고 유료 상품(`product_packages`) 구매 시 이 플래그가 활성화되도록 로직을 구현한다.



#### [POL-B-003] 이력서 열람 권한 (무료/유료)



- **결정:** (옵션 1 - 정책 확정 예시) 이력서 열람은 **전면 유료**이다. `user_wallets` 테이블의 `resume_read_coupons` 개수가 1 이상일 때만 열람 가능하며, 열람 시 1개 차감된다.
- **근거:** (1단계 결정) 레거시의 복잡한 무료/유료/열람요청 정책은 폐기하고, 비즈니스 모델을 단순화/명확화한다. (레거시 '열람 요청' 기능은 폐기)

------



### [POL-C] 결제 및 정산 정책 (Payment)





#### [POL-C-001] 결제 방식



- **결정:** 모든 결제는 **Toss Payments (또는 Iamport)** SDK를 통한 **API 기반 결제**만 지원한다. 백엔드는 `webhook`을 통해서만 최종 승인을 처리한다.
- **근거:** (1단계 결정) 레거시 `pg_module`의 PHP 폼 전송 방식은 폐기한다.



#### [POL-C-002] 포인트 환불



- **결정:** 포인트 충전 후 **7일 이내** 사용 내역이 없는 경우에만 환불 가능하다. (PG사 수수료 제외) 사용된 포인트는 환불 불가하다.
- **근거:** (레거시 정책 부재) 명확한 환불 정책 수립.



#### [POL-C-003] 패키지 업그레이드/다운그레이드



- **결정:** 지원하지 않는다. 패키지는 구매 시 확정되며, 변경을 원할 시 기존 패키지 만료 후 신규 패키지를 구매해야 한다.
- **근거:** (레거시 정책 부재) 초기 비즈니스 로직 단순화.

------



### [POL-D] 시스템 및 보안 정책 (System)





#### [POL-D-001] SSL 강제화



- **결정:** **인프라 레벨(Nginx, ALB, Ingress 등)**에서 HTTP를 HTTPS로 강제 리다이렉션한다.
- **근거:** (1단계 결정) 레거시 PHP 애플리케이션 레벨의 리다이렉션 로직은 폐기한다.



#### [POL-D-002] IP 차단 (WAF)



- **결정:** **Cloudflare, AWS WAF** 등 전문 매니지드 서비스를 사용한다.
- **근거:** (1단계 결정) 레거시 `happy_hack_block_list` 테이블 기반의 수동 차단 로직은 폐기한다.



#### [POL-D-003] 접속자 로그



- **결정:** API Gateway 또는 웹 서버(Nginx)의 **Access Log**를 수집하여 **ELK/Loki** 등 로그 분석 시스템으로 전송/분석한다.
- **근거:** (1단계 결정) 레거시 `happy_admin_ipTable`에 직접 INSERT하는 방식은 고성능 API 환경에 적합하지 않다.